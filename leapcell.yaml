# F1 Bot Leapcell Configuration - Playwright Version
# Optimized for Production with Live Timing Support
runtime: python
build_command: |
  pip install -r requirements.txt
  playwright install chromium --with-deps
start_command: gunicorn -w 1 -b :8080 app:app --timeout 300 --graceful-timeout 120 --max-requests 5000 --max-requests-jitter 1000
port: 8080

# Environment variables (set these in Leapcell dashboard)
env:
  TELEGRAM_BOT_TOKEN: your_bot_token_here
  PORT: 8080
  PLAYWRIGHT_BROWSERS_PATH: /tmp/playwright
  WEBHOOK_URL: https://f1bot2026update-rhidayetov9689-hrfji06h.leapcell.dev/webhook
  PLAYWRIGHT_SKIP_BROWSER_DOWNLOAD: 0

# Health check configuration
health_check:
  path: /health
  interval: 30
  timeout: 15
  retries: 3

# Resource configuration (increased for Playwright)
resources:
  cpu: 1.0
  memory: 1024

# Alternative configuration using Dockerfile:
# runtime: docker
# build_command: |
#   docker build -t f1-bot .
#   docker run --rm -d -p 8080:8080 f1-bot
# port: 8080
